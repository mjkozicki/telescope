import{f as z,a as b}from"../chunks/B2htzuoC.js";import"../chunks/vVpGJ83M.js";import{V as M,W as h,j as e,Z as N,Y as p,X as u,F as c,_ as n,m as a}from"../chunks/Bt75DD1o.js";import{e as O,s as y}from"../chunks/OhSWhIBa.js";import{i as D}from"../chunks/BA_UftuP.js";import{c as V}from"../chunks/QfwzcqkF.js";import{i as W}from"../chunks/MYImdi6P.js";import{g as F}from"../chunks/FwNjMwio.js";var X=z('<div class="error-message svelte-tziouu"> </div>'),Y=z('<div class="success-message svelte-tziouu"> </div>'),Z=z('<div class="section-content"><h2>Upload Results</h2> <p>Upload existing test results for analysis.</p> <form><!> <!> <div class="form-group svelte-tziouu"><label for="files" class="svelte-tziouu">Select result archive (.zip):</label> <input type="file" id="files" name="files" accept=".zip" class="svelte-tziouu"/></div> <button type="submit" class="svelte-tziouu"> </button></form></div>');function J(P,j){M(j,!1);let o=c(null),f=c(!1),r=c(""),d=c("");async function I(t){if(t.preventDefault(),!e(o)||e(o).length===0){a(r,"Please select a file to upload");return}a(f,!0),a(r,""),a(d,"");try{const s=e(o)[0],i=new FormData;i.append("file",s);const k=await fetch("/api/upload",{method:"POST",body:i}),l=await k.json();k.ok&&l.success?(a(d,"Upload successful! Redirecting to results..."),setTimeout(()=>{l.url?F(l.url):l.testId&&F(`/results/${l.testId}/overview`)},1500)):a(r,l.error||"Failed to upload file")}catch(s){a(r,"Network error. Please try again."),console.error("Upload error:",s)}finally{a(f,!1)}}W();var v=Z(),m=p(u(v),4),U=u(m);{var R=t=>{var s=X(),i=u(s,!0);n(s),h(()=>y(i,e(r))),b(t,s)};D(U,t=>{e(r)&&t(R)})}var x=p(U,2);{var S=t=>{var s=Y(),i=u(s,!0);n(s),h(()=>y(i,e(d))),b(t,s)};D(x,t=>{e(d)&&t(S)})}var g=p(x,2),w=p(u(g),2);n(g);var _=p(g,2),T=u(_,!0);n(_),n(m),n(v),h(()=>{w.disabled=e(f),_.disabled=!e(o)||e(o).length===0||e(f),y(T,e(f)?"Uploading...":"Upload")}),V(w,()=>e(o),t=>a(o,t)),O("submit",m,I),b(P,v),N()}export{J as component};
