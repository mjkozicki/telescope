{"version":3,"file":"_server.ts-CQEmMaky.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/results/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nimport { existsSync, readdirSync, readFileSync } from \"fs\";\nimport { join } from \"path\";\nconst GET = async () => {\n  try {\n    const resultsDir = join(process.cwd(), \"static\", \"results\");\n    if (!existsSync(resultsDir)) {\n      return json([]);\n    }\n    const entries = readdirSync(resultsDir, { withFileTypes: true });\n    const results = entries.filter((entry) => entry.isDirectory()).map((entry) => {\n      const testId = entry.name;\n      const configPath = join(resultsDir, testId, \"config.json\");\n      const manifestPath = join(resultsDir, testId, \"manifest.json\");\n      let url = \"Unknown\";\n      let browser = \"Unknown\";\n      let timestamp = testId;\n      if (existsSync(configPath)) {\n        try {\n          const config = JSON.parse(readFileSync(configPath, \"utf-8\"));\n          url = config.url || url;\n          browser = config.browser || browser;\n        } catch (err) {\n          console.error(`Error reading config for ${testId}:`, err);\n        }\n      }\n      if (existsSync(manifestPath)) {\n        try {\n          const manifest = JSON.parse(readFileSync(manifestPath, \"utf-8\"));\n          timestamp = manifest.timestamp || manifest.createdAt || timestamp;\n        } catch (err) {\n          console.error(`Error reading manifest for ${testId}:`, err);\n        }\n      }\n      return {\n        id: testId,\n        url,\n        browser,\n        timestamp\n      };\n    }).sort((a, b) => b.id.localeCompare(a.id));\n    return json(results);\n  } catch (error) {\n    console.error(\"Error reading results directory:\", error);\n    return json(\n      {\n        error: \"Internal server error\",\n        message: error instanceof Error ? error.message : \"Unknown error\"\n      },\n      { status: 500 }\n    );\n  }\n};\nexport {\n  GET\n};\n"],"names":[],"mappings":";;;;;AAGK,MAAC,GAAG,GAAG,YAAY;AACxB,EAAE,IAAI;AACN,IAAI,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,QAAQ,EAAE,SAAS,CAAC;AAC/D,IAAI,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,EAAE;AACjC,MAAM,OAAO,IAAI,CAAC,EAAE,CAAC;AACrB,IAAI;AACJ,IAAI,MAAM,OAAO,GAAG,WAAW,CAAC,UAAU,EAAE,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC;AACpE,IAAI,MAAM,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK;AAClF,MAAM,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI;AAC/B,MAAM,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,aAAa,CAAC;AAChE,MAAM,MAAM,YAAY,GAAG,IAAI,CAAC,UAAU,EAAE,MAAM,EAAE,eAAe,CAAC;AACpE,MAAM,IAAI,GAAG,GAAG,SAAS;AACzB,MAAM,IAAI,OAAO,GAAG,SAAS;AAC7B,MAAM,IAAI,SAAS,GAAG,MAAM;AAC5B,MAAM,IAAI,UAAU,CAAC,UAAU,CAAC,EAAE;AAClC,QAAQ,IAAI;AACZ,UAAU,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;AACtE,UAAU,GAAG,GAAG,MAAM,CAAC,GAAG,IAAI,GAAG;AACjC,UAAU,OAAO,GAAG,MAAM,CAAC,OAAO,IAAI,OAAO;AAC7C,QAAQ,CAAC,CAAC,OAAO,GAAG,EAAE;AACtB,UAAU,OAAO,CAAC,KAAK,CAAC,CAAC,yBAAyB,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC;AACnE,QAAQ;AACR,MAAM;AACN,MAAM,IAAI,UAAU,CAAC,YAAY,CAAC,EAAE;AACpC,QAAQ,IAAI;AACZ,UAAU,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;AAC1E,UAAU,SAAS,GAAG,QAAQ,CAAC,SAAS,IAAI,QAAQ,CAAC,SAAS,IAAI,SAAS;AAC3E,QAAQ,CAAC,CAAC,OAAO,GAAG,EAAE;AACtB,UAAU,OAAO,CAAC,KAAK,CAAC,CAAC,2BAA2B,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC;AACrE,QAAQ;AACR,MAAM;AACN,MAAM,OAAO;AACb,QAAQ,EAAE,EAAE,MAAM;AAClB,QAAQ,GAAG;AACX,QAAQ,OAAO;AACf,QAAQ;AACR,OAAO;AACP,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/C,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC;AACxB,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,KAAK,CAAC;AAC5D,IAAI,OAAO,IAAI;AACf,MAAM;AACN,QAAQ,KAAK,EAAE,uBAAuB;AACtC,QAAQ,OAAO,EAAE,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG;AAC1D,OAAO;AACP,MAAM,EAAE,MAAM,EAAE,GAAG;AACnB,KAAK;AACL,EAAE;AACF;;;;"}